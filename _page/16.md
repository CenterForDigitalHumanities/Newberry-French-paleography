---
layout: default
title: Interactive Map
slug: map
---
<head>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"
   integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="
   crossorigin=""/>
	<script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"
	   integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="
	   crossorigin=""></script>
	<style>
		#leafletInstanceContainer { 
		    height: 35em;
		    background-image: url(./www/images/earth.gif);
		    background-repeat: no-repeat;
		    background-attachment: local;
		    background-position: center -19em;
		    background-size: 85em;
		    border: 1px solid black;
		    z-index:0;
		}
		#loadingMessage{
		    text-align: center;
		    background-color: white;
		    animation-name: color;
		    animation-duration: 2s;
		    animation-iteration-count: infinite;
		}
		.featureInfo{
		    margin: 4px 0px;
		    font-family: monospace;
		}

		.featureInfo label{
		    margin-right: 6px;
		    font-family: sans-serif;
		}

		.featureInfo img, .leaflet-popup-content img{
		    max-height:  270px;
		}
	</style>
</head>


This interactive map, originally created by Emily Kelley, displays most of the manuscripts available on the French Renaissance Paleography site. Manuscripts with unknown coordinates are not available on this map. Click [here](/manuscripts) for a full list of manuscripts contained within the French Renaissance Paleography site.

<div id="leafletInstanceContainer">
	<div id="loadingMessage" style="text-align: center;">Gathering Resource Data From Around France...</div>
</div>

<script type="text/javascript"> 
	init()

	async function init(){
		let geojson = await fetch("./iiif-cache/interactive_map.json").then(resp => resp.json()).catch(err => alert(err))
	    // let formattedGeoJsonData = geoJsonData.flat(1) //AnnotationPages and FeatureCollections cause arrays in arrays.  
	    // let topLevelResourceType = GEOLOCATOR.resource["@type"] ?? GEOLOCATOR.resource.type ?? "Yikes"
	    // let allGeos = formattedGeoJsonData.map(function(geoJSON){ 
	    //     //Programatically fix up the feature.properties????
	    //     if(!geoJSON.properties.hasOwnProperty("summary")){
	    //         geoJSON.properties.summary = GEOLOCATOR.resource.summary ?? ""
	    //     }
	    //     return geoJSON
	    // })
	    //Abstracted.  Maybe one day you want to GEOLOCATOR.initializeOtherWebMap(latlong, allGeos)
	    initializeLeaflet([12,12], geojson)
	}

	/**
	 * Inititalize a Leaflet Web Map with a standard base map. Give it GeoJSON to draw.
	 * In this case, the GeoJSON are all Features take from Feature Collections.
	 * These Feature Collections were values of navPlace properties.
	 * All Features from the outer most objects and their children are present.
	 * This may have caused duplicates in some cases.  We aplogoize it is slightly naive for now.
	 */     
	async function initializeLeaflet(coords, geoMarkers){
	    let mymap = L.map('leafletInstanceContainer')  
	    L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager_nolabels/{z}/{x}/{y}{r}.png', {
			attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
			maxZoom: 19
		}).addTo(mymap);
	    mymap.setView(coords,2);
	    let appColor = "#FF6D0B"
	    L.geoJSON(geoMarkers, {
	        pointToLayer: function (feature, latlng) {
	            return L.circleMarker(latlng, {
	                radius: 6,
	                fillColor: appColor,
	                color: appColor,
	                weight: 1,
	                opacity: 1,
	                fillOpacity: 1
	            })
	        },
	        onEachFeature: formatPopup
	    })
	    .addTo(mymap)
	    leafletInstanceContainer.style.backgroundImage = "none"
	    loadingMessage.classList.add("is-hidden")
	}

	function formatPopup(feature, layer) {
	    let popupContent = ""
	    if (feature.properties){
	        if(feature.properties.title){
	            popupContent += `<div class="featureInfo"> ${feature.properties.title} </div>`
	        }
	        if (feature.properties.city) {
	            popupContent += `<div class="featureInfo"> ${feature.properties.city} </div>`
	        }
	        if (feature.properties.region) {
	            popupContent += `<div class="featureInfo"> ${feature.properties.region} </div>`
	        }
	        layer.bindPopup(popupContent)
	    }
	}
</script>

<!-- <iframe title="Interactive map" allowfullscreen="" frameborder="0" height="520" mozallowfullscreen="" msallowfullscreen="" oallowfullscreen="" src="https://frp.cartodb.com/viz/2ba1e24e-c5ff-11e5-bc97-0ef24382571b/embed_map"></iframe> -->
